<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>מפת האושר של שחר</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4f6f8;
      color: #333;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #2c3e50;
    }

    .card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      margin: 20px auto;
      max-width: 700px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    label {
      font-weight: bold;
      margin-bottom: 5px;
      display: block;
    }

    textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      resize: vertical;
      min-height: 70px;
      margin-bottom: 10px;
    }

    button {
      background-color: #2980b9;
      color: white;
      border: none;
      padding: 10px 18px;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background-color: #1c5f8b;
    }

    .saved-msg {
      color: green;
      font-size: 0.9em;
      margin-top: 5px;
    }

    .view-entries {
      text-align: center;
      margin-top: 40px;
    }

    .entry {
      background: #fff;
      border-radius: 6px;
      padding: 15px;
      margin-bottom: 10px;
      border-right: 5px solid #3498db;
    }

    @media (max-width: 600px) {
      .card {
        margin: 10px;
      }
    }
  </style>
</head>
<body>

  <h1>מפת האושר של שחר</h1>

  <div class="card" id="questions-container"></div>

  <div class="view-entries">
    <button onclick="showEntries()">הצג רשומות קודמות</button>
    <div id="entries-container"></div>
  </div>

  <script>
    const questions = [
      "מה חשוב לי לזכור היום?",
      "מה היה טוב היום?",
      "עם מי התחברתי השבוע?",
      "מה יצרתי השבוע?",
      "האם יצאתי לטיול בטבע?",
      "מה שיתפתי מהלב השבוע?",
      "איזו מטרה קטנה השגתי החודש?",
      "האם יזמתי משהו חברתי עם ערך?",
      "מה החזרתי לחיים שלי מהעבר?",
      "מה נהניתי השבוע?",
      "מה הלחיץ אותי השבוע?",
      "מה הייתי רוצה לשנות בשבוע הבא?"
    ];

    const container = document.getElementById('questions-container');
    const dateKey = new Date().toISOString().split('T')[0]; // YYYY-MM-DD

    questions.forEach((question, index) => {
      const section = document.createElement('div');

      const label = document.createElement('label');
      label.innerText = question;

      const textarea = document.createElement('textarea');
      textarea.id = `answer-${index}`;
      textarea.value = JSON.parse(localStorage.getItem(dateKey) || '{}')[`q${index}`] || '';

      const saveBtn = document.createElement('button');
      saveBtn.innerText = 'שמור';
      const savedMsg = document.createElement('div');
      savedMsg.className = 'saved-msg';

      saveBtn.onclick = () => {
        let entry = JSON.parse(localStorage.getItem(dateKey) || '{}');
        entry[`q${index}`] = textarea.value;
        localStorage.setItem(dateKey, JSON.stringify(entry));
        savedMsg.innerText = 'נשמר בהצלחה!';
        setTimeout(() => savedMsg.innerText = '', 2000);
      };

      section.appendChild(label);
      section.appendChild(textarea);
      section.appendChild(saveBtn);
      section.appendChild(savedMsg);
      container.appendChild(section);
    });

    function showEntries() {
      const entriesContainer = document.getElementById('entries-container');
      entriesContainer.innerHTML = '';
      Object.keys(localStorage).sort().reverse().forEach(key => {
        if (!key.match(/^\d{4}-\d{2}-\d{2}$/)) return;
        const data = JSON.parse(localStorage.getItem(key));
        const div = document.createElement('div');
        div.className = 'entry';
        div.innerHTML = `<strong>${key}</strong><br>` +
          questions.map((q, i) =>
            data[`q${i}`] ? `<b>${q}</b><br>${data[`q${i}`]}<br><br>` : ''
          ).join('');
        entriesContainer.appendChild(div);
      });
    }
  </script>

</body>
</html>
